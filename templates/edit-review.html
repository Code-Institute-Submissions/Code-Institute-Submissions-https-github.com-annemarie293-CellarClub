{% extends "base.html" %}

{% block content %}

<!--------Page Header -------->
<div class="row ">
    <h3 class="page-header col-8 offset-2 p-2 shadow">Edit your review for {{ wine.wine_name.title() }}</h3>
</div>

<!---------- Edit Review section -------->
<div class="row">
    <div class="card col-sm-12 col-md-8 offset-md-2 my-4 shadow">
        <form class="g-3 needs-validation" novalidate method="POST"
            action="{{ url_for('edit_review', wine_id=wine._id)}}">
            <div class="row mb-2 p-2 mx-2">
                <!--Wine Name input field-->
                <div class="col-sm-12 col-md-6 px-2">
                    <label for="wine_name" class="visually-hidden">Wine Name</label>
                    <div class="input-group has-validation">
                        <span class="input-group-text" id="wine_name-input"><i class="fas fa-award"></i></span>
                        <input id="wine_name" name="wine_name" type="text" class="form-control text-center"
                            value="{{ wine.wine_name.title() }}" readonly required aria-label="wineName-input"
                            aria-describedby="wine_name">
                        <div class="invalid-feedback">
                            Please enter the wine name
                        </div>
                    </div>
                </div>
                <!--Vintage input field-->
                <div class="col-sm-12 col-md-6 px-2">
                    <label for="grape" class="visually-hidden">Grape</label>
                    <div class="input-group has-validation">
                        <span class="input-group-text" id="vintage-input"><i class="fas fa-wine-bottle"></i></span>
                        <input id="vintage" name="vintage" type="text" class="form-control text-center" minlength="4"
                            maxlength="4" required pattern="^[0-9]{4,4}$" value="{{ wine.vintage }}" readonly required
                            aria-label="vintage" aria-describedby="vintage-input">
                        <div class="invalid-feedback">
                            Please enter a vintage for this wine
                        </div>
                    </div>
                </div>
            </div>
            <!--Review Input-->
            <div class="row mb-2 p-2 mx-2">
                <div class="col">
                    <div class="input-group">
                        <span class="input-group-text" id="review-input"><i class="fas fa-pen prefix black-text"></i></span>
                        <textarea id="review" name="review" class="form-control" minlength="5" maxlength="200" rows="4"
                            required>{{ old_review }}</textarea>
                        <div class="invalid-feedback">
                            Please enter a new review for this wine
                        </div>
                    </div>
                    <label for="review" class="visually-hidden">Your Review</i></label>
                </div>
            </div>
            <!--Rating Input-->
            <div class="col text-center form-check">
                <h5>Rate this wine</h5>
                <p>
                    <label>
                        {% if old_rating == 1%}
                        <input name="rating" type="radio" id="1" value="1" class="form-check-input" checked required />
                        {% else %}
                        <input name="rating" type="radio" id="1" value="1" class="form-check-input" required />
                        {% endif %}
                        <span>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                        </span>
                    </label>
                </p>
                <p>
                    <label>
                        {% if old_rating == 2 %}
                        <input name="rating" type="radio" id="2" value="2" class="form-check-input" checked />
                        {% else %}
                        <input name="rating" type="radio" id="2" value="2" class="form-check-input" />
                        {% endif %}
                        <span>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                        </span>
                    </label>
                </p>
                <p>
                    <label>
                        {% if old_rating == 3 %}
                        <input name="rating" type="radio" id="3" value="3" class="form-check-input" checked />
                        {% else %}
                        <input name="rating" type="radio" id="3" value="3" class="form-check-input" />
                        {% endif %}
                        <span>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star grey-text"></i>
                            <i class="fas fa-star grey-text"></i>
                        </span>
                    </label>
                </p>
                <p>
                    <label>
                        {% if old_rating == 4 %}
                        <input name="rating" type="radio" id="4" value="4" class="form-check-input" checked />
                        {% else %}
                        <input name="rating" type="radio" id="4" value="4" class="form-check-input" />
                        {% endif %}
                        <span>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star grey-text"></i>
                        </span>
                    </label>
                </p>
                <p>
                    <label>
                        {% if old_rating == 5 %}
                        <input name="rating" type="radio" id="5" value="5" class="form-check-input" checked />
                        {% else %}
                        <input name="rating" type="radio" id="5" value="5" class="form-check-input" />
                        {% endif %}
                        <span>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                            <i class="fas fa-star amber-text"></i>
                        </span>
                    </label>
                </p>
            </div>
            <!--Submit/Cancel button-->
            <div class="row mb-2 text-center justify-content-center">
                <a class="btn col-4 m-3 form-cancel rounded text-center corben-font"
                    href="{{ url_for('view_wines')}}">Cancel &nbsp;<i class="fas fa-times-circle"></i></a>
                <button type="submit" class="btn col-4 m-3 form-submit rounded text-center corben-font">
                    Submit Your Review &nbsp;<i class="fas fa-plus-circle"></i></button>
            </div>
        </form>
    </div>
</div>


{% endblock %}